# 微信小程序 [01] 基础

...

## 目录结构

小程序项目由配置文件、页面文件、静态文件和其他相关（比如组件、小程序云函数等）内容组成，一般小程序会由四类文件组成：

* `.json` JSON 配置文件
* `.wxml` WXML 模板文件
* `.wxss` WXSS 样式文件
* `.js` 	JS 脚本逻辑文件

## 小程序的配置

小程序有三个重要的配置，分别放在三个 JSON 文件内：`project.config.json`（工具项目配置）、`app.json`（小程序配置）、`page.json`（单页面配置）

## 组件和插件

小程序页面时由各种组件组成的，组件可以类比成原生 HTML5 的标签。

### 组件

小程序内部定义了很多组件，可以对应 HTML5 的标签和基础能力来理解，小程序的组件根据实现不同，可以分为 Web 组件和 Native 组件，Web 组件是由 HTML5 原生 Web 组件封装的组件，比如 `view`、`image`等；Native 组件是为了增加小程序的体验，用客户端技术实现的组件，包括一些复杂交互、原生 Web 组件性能不高的组件，例如`input`、`map`、`canvas`、`video`等。

小程序一共提供 8 大类 30 多个组件：
* 视图容器：主要是实现页面布局的，对常见的布局形式进行了封装	，比如滚动 scroll-view 等
* 基本内容：类似 HTML5 中内容相关的 p、em 等
* 表单相关：要比 HTML5 的 form 表单丰富一些
* 导航：	类似 a 标签
* 媒体：类比 HTML5 中的 video、audio 和 img 等，但是提供更标准的界面和更丰富的 API 支持
* 画布：Native 实现的 canvas
* 地图：结合通讯地图数据 Native 实现的组件
* 开放能力：这部分组件偏通用和小程序业务

### 插件

插件是一组 JS 接口、自定义组件或页面的封装，用于提供第三方小程序调用。

## 开发基础

微信小程序是由数据驱动的开发框架。

### 数据驱动

微信小程序是数据驱动模型，在 WXML 中可以对页面的数据进行绑定。
小程序内对页面的数据修改只能通过 `setData` 方法，不能使用直接赋值的方式 `this.data.key = value`。

**注意：修改页面数据，只能使用 this.setData 修改。**

### 事件绑定和处理

在小程序内，除了标准 HTML5 中遇见的 `touchstart` 事件外，增加了 `tap` 类的事件，主要包括以下几种：

小程序内，时间绑定是通过在 WXML 标签增加 `bind*` 属性来实现的。

### 事件冒泡

小程序内的事件分为可冒泡和不可冒泡的时间，除了 submit、input 之类的时间，多数是可冒泡的事件，对于事件的绑定，除了 `bind*` 的方式，还可以通过 `catch*` 的方式来绑定，两者的区别在于：

* `bind` 不会阻止冒泡，变形写法为 `bind:*`
* `catch` 会阻止事件继续冒泡，变形写法为 `catch:*`


### 事件捕获

小程序内，触摸类事件支持捕获阶段，捕获是先于冒泡的触发，绑定捕获事件，可以使用 `capture-bind`、`capture-catch`，后者将中断捕获阶段和取消冒泡阶段。

### 事件对象

当事件触发时，处理函数会响应，传入 `event` 对象，通过 `event` 对象可以获取事件触发时候的一些信息，包括时间戳、`detail`等。

### 路由

在小程序内，不能像 HTML5 中 a 标签那样，随便跳转，也不能像 `location` 对象中对应的属性那样随意跳转，小程序提供了 a 标签和 `location` 对象的方法。

在小程序中，路由是由路由栈来维护的，小程序的路由栈中最多维护 5 个页面，这样在 5 个页面内，小程序维护其渲染页面，可以实现快速的切换。

### JavaScript 的限制和增强

微信内的 JavaScript 相对于浏览器中的有限制也有增强，增强的部分是基于小程序 Native 端能力做的增强，比如增强，跟 HTML5 浏览器环境最大的不同是限制部分。

小程序的执行环境是没有浏览器了，所以浏览器环境特有的 `window` 对象、BOM 和 DOM 等相关 API 都存在缺失（有对应的补充 API），小程序的执行环境是类似于 Node.js 的一种执行环境。因为没有浏览器环境，所以跟浏览器相关的操作如 cookie、Ajax 请求（XMLHttpRequest）、DOM 选择器、DOM 事件、路由 history、缓存、设备信息、位置等不存在，与只相对应的是小程序的私有 API，比如不能在小程序中不能使用 `XMLHttpRequest`，但是可以使用功能更加强大的 `wx.request` 等。

### rpx

小程序 WXSS 中使用了 rpx 这个长度单位，可以用于表示元素的宽高和边距、字体的大小等。rpx 是以小程序容器宽度（等于设备宽高）恒等于 `750rpx` 来定义的。

## 云开发

小程序开发中用到的服务器、数据库和静态资源管理，都可以托管到[小程序·云开发]上